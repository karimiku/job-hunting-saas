# 就活管理サービス 要件定義書 v1

---

## 1. 背景・作成のきっかけ

就活では、応募・説明会予約・面接調整・提出物・連絡（合否/日程調整）が、複数の就活サービスや企業採用ページに分散する。結果として「どの会社のどの応募ルートが、いまどのフェーズで、次に何をすべきか」が把握しづらく、締切漏れ・二重対応・情報散逸（マイページURL、証跡、メモ）が起きやすい。

個人運用（GitHub + Claude Code Skills での自動管理）では継続できても、一般ユーザーには入力負荷が高く破綻しやすい。そこで、横断の運用台帳として、入力を最小化し、壊れても保存は失敗しない（= 運用が止まらない）体験を提供するクラウドサービスを作成する。

---

## 2. 目的

1. 就活活動を「応募（Entry）単位」で一元管理し、サイト横断の進捗把握を可能にする
2. **すべての機能は手動入力で完結できる**ことを前提とし、Chrome拡張による自動入力で省力化する（拡張は必須ではなく"加速装置"）
3. 次アクション（Task）と予定（Event）を分離し、漏れを実質ゼロに近づける
4. 「この応募のフロー何だっけ？」に、テンプレ + 実績ログで即答できる

**注**: マネタイズは本フェーズの要件に含めない。

---

## 3. 入力方式の設計方針

本サービスは **手動入力と自動入力の両方に対応** する。どちらか一方に依存せず、ユーザーが自由に使い分けられる設計とする。

### 手動入力（Web UI）
- Chrome拡張なしでも、Web画面からすべてのデータ（Company / Entry / Task / Event / Evidence）を作成・編集・削除できる
- スマホ（レスポンシブ）からも手動入力が可能（URL貼付 + メモ等）
- 拡張を使わないユーザーにとっても、単体で完結するプロダクトとして成立する

### 自動入力（Chrome拡張）
- 就活サイト閲覧中に、ページの文脈情報（URL / タイトル / ドメイン / ページ内テキスト）を自動取得し、入力を省力化する
- 企業名・媒体（source）は自動推定するが、**確定はユーザー操作**（候補提示 → ワンクリック確定）
- 自動推定が失敗しても、最低限の情報（URL + タイトル + 時刻）で必ず保存できる（Inbox退避）
- 拡張は「入力の加速装置」であり、なくても運用は成立する

### 両対応の原則
- **同じデータに対して、手動入力と自動入力のどちらで作成されたかを区別しない**（データモデルは統一）
- 自動入力で作成されたデータも、Web UIから自由に編集・修正できる
- 拡張で保存したInboxアイテムを、Web UIで手動整理（Entry割当）できる

---

## 4. 管理単位

- **Company（企業）** はマスター情報
- **Entry（応募）** が運用単位（インターン、本選考、職種別などを別Entryとして扱う）
- Evidence / Task / Event / StageHistory は Entry に紐づく
- InboxItem は Entry 未割当の一時保管（後から割当）

---

## 5. 想定データ規模

### 母数
- 年間就活母数（上限近似）: 約58万人/年（大学学部卒業者ベース、文科省 学校基本統計）
- 1人あたり Entry（本選考 + インターン等）: 約30件/年
  - 本選考エントリー: 平均約24社（キャリタス 2024卒調査）
  - インターン応募: 平均約8.6社（マイナビ調査）

### 利用率別の年間規模

| 利用率 | ユーザー数 | Entry | Evidence（×3） | Task（×2） | Event（×1） |
|--------|-----------|-------|---------------|-----------|------------|
| 1% | 約5,800人 | 約19万 | 約57万 | 約38万 | 約19万 |
| **5%（設計ターゲット）** | **約29,000人** | **約95万** | **約285万** | **約190万** | **約95万** |
| 10% | 約58,000人 | 約190万 | 約570万 | 約380万 | 約190万 |

### ストレージ目安
- RDBテキストデータのみ: 5%利用時で年間数GB〜十数GB程度（添付ファイルなし前提）
- 将来の会話ログ保存を入れると桁が変わるため、別途設計が必要

---

## 6. スコープ

### 6.1 MVP（初期提供）

- Company管理（マスター / 別名はユーザー単位）
- Entry管理（応募ルート、職種/メモ、媒体、状態）
- Stage（フェーズ）+ 履歴（StageHistory）
- Task（作業と締切）
- Event（日時確定の予定）
- Evidence（証跡URL・タイトル等）
- Inbox（未整理箱）+ ゴミ屋敷化防止導線
- Chrome拡張（媒体推定・会社推定の候補提示・必ず保存できるフォールバック）
- モバイル（レスポンシブ）: 閲覧 + 手動追加 + タスク処理
- 通知（メール）: 締切リマインド + Inbox消化促進
- 退会（全データ削除）+ データエクスポート

### 6.2 将来拡張（MVP外）

- ESの自動生成（生成AI利用）
- 会話情報・下書き・提出履歴の長期保存（ナレッジ化）
- Gmail / Google Calendar API 連携（自動取り込み）
- フロー推定の高度化（統計・学習）
- 就活サイト側フォームの自動入力（規約・保守リスクが高く、現段階では除外）

---

## 7. 利用者と利用シーン

### ペルソナ
- 複数の就活サイトと企業ページを併用する就活生
- 管理の必要は理解しているが手入力が続かない層
- Notion / スプレッドシートで管理を試みたが破綻した経験がある
- 移動中はスマホ、作業はPCで行う

### 代表的シーン
1. PCで就活サイト閲覧中、拡張で1クリック保存 → 証跡がInbox/Entryに登録される
2. スマホで締切が近いタスクを確認し、完了/期限変更/メモ追記を行う
3. 応募詳細から証跡を辿ってマイページへ戻り、迷わず次作業に進む
4. 「この応募のフロー何だっけ？」を応募詳細で確認し、現状と次ステップを把握する

---

## 8. 提供価値（差別化）

- **横断統合**: サイトをまたいだ応募・選考の情報を「Entry単位」に集約
- **入力最小化**: 拡張による文脈取得（ドメイン・URL・タイトル・ページ情報）で手入力を削減
- **漏れ防止**: TaskとEventを分離し、締切と予定を中心に据えた運用設計
- **検索性**: 証跡（URL履歴）が残るため「どこに何があったか」を後から辿れる
- **壊れにくさ**: Inbox + フォールバックで、抽出精度が低くても運用が破綻しない

### 競合に対するポジショニング
- 大手ナビ（リクナビ/マイナビ）: 自社エコシステム内の管理に強いが、横断管理はビジネス上やりにくい
- スカウト系（OfferBox/paiza）: マッチングが主で、学生側の横断管理思想はない
- 口コミ系（就活会議）: 情報収集が主戦場
- **本サービス**: 「就活版 Personal CRM / パイプライン管理」として、横断の実行管理（ops）に特化

---

## 9. 機能要件

### 9.1 認証・アカウント

| ID | 要件 |
|----|------|
| FR-01 | ユーザー登録 / ログイン / ログアウト |
| FR-02 | 退会（全データ削除） |
| FR-03 | 拡張とWebの認証連携（拡張がユーザーを特定できる状態を作る） |
| FR-04 | データエクスポート（CSV等）: Companies / Entries / Tasks / Events / Evidence / Inbox |

### 9.2 Company（企業マスター）

| ID | 要件 |
|----|------|
| FR-10 | 企業の作成 / 編集 / 統合（重複統合） |
| FR-11 | 別名辞書（Alias）はユーザー単位で保持（マスター汚染防止） |
| FR-12 | 企業メモ（任意） |

### 9.3 Entry（応募）管理

| ID | 要件 |
|----|------|
| FR-20 | 応募の作成 / 編集 / 削除 |
| FR-21 | Entry が保持する項目: Company参照（必須）、応募ルート（自由入力可）、source（媒体）、状態（Open / Closed-Win / Closed-Lose / Closed-Drop）、現在Stage（またはカスタムステータス）、次アクション要約、締切、タグ/メモ |
| FR-22 | 一覧（検索・フィルタ）: 状態、Stage、source、締切近い順、更新順 |
| FR-23 | クローズ（お祈り/辞退/内定承諾等）→ デフォルト非表示、アーカイブビューで閲覧 |

### 9.4 Stage（選考フェーズ）と履歴

| ID | 要件 |
|----|------|
| FR-30 | デフォルトテンプレ提供（応募 → ES → テスト → 面接 → 内定 など） |
| FR-31 | Entryに「カスタムステータス（自由入力）」を用意（テンプレで破綻しない逃げ道） |
| FR-32 | Stage更新は手動、更新履歴（StageHistory）を保持しタイムライン表示 |
| FR-33 | Entry単位でステージ追加可能（並び替え等はMVPでは必須でない） |

### 9.5 Task（作業）

| ID | 要件 |
|----|------|
| FR-40 | Entryに紐づくタスクの作成 / 完了 / 編集 |
| FR-41 | 期限（締切）・優先度（任意）・通知ON/OFF（任意） |
| FR-42 | ダッシュボードで期限が近い未完了Taskを強調表示 |

### 9.6 Event（予定）

| ID | 要件 |
|----|------|
| FR-50 | Entryに紐づく予定の作成 / 編集（面接、説明会、座談会、適性検査 等） |
| FR-51 | Event は「完了」ではなく「実施済み / 結果待ち」等の自然な状態遷移を持つ |
| FR-52 | ダッシュボードに直近EventをTaskと別枠で表示 |

### 9.7 Evidence（証跡）

| ID | 要件 |
|----|------|
| FR-60 | Entryに紐づく証跡保存（URL、タイトル、保存日時、source、任意メモ） |
| FR-61 | 証跡一覧から外部ページへ再訪できる |
| FR-62 | 証跡の付け替え（誤紐付け修正） |

### 9.8 Inbox（未整理箱）

| ID | 要件 |
|----|------|
| FR-70 | Entry未選択でも証跡を必ず保存できる（失敗しないUX） |
| FR-71 | Inbox → Entryへの割当が数秒でできる（推定候補を最上段に提示） |
| FR-72 | ダッシュボード上部に未整理件数を常時表示 |
| FR-73 | 自動アーカイブ（例: 30日経過でアーカイブへ、検索は可能） |
| FR-74 | 通知メールに未整理が多い場合の整理促進メッセージを含める |

### 9.9 Chrome拡張

| ID | 要件 |
|----|------|
| FR-80 | source推定は複数シグナルで行う（ドメイン、タイトル、見出し、ページ内固定語）。ATSドメイン（i-web/SONAR等）でも機能する設計 |
| FR-81 | company推定は候補提示まで（確定はユーザー操作） |
| FR-82 | 抽出失敗しても「URL + タイトル + 時刻 + 推定source」で必ず保存（Inbox行き） |
| FR-83 | 直近Entryへの即保存導線（入力削減） |
| FR-84 | SPA等でタイトル/DOM取得が不安定な場合のフォールバック（手入力 + Inbox） |

### 9.10 モバイル（スマホ）

| ID | 要件 |
|----|------|
| FR-90 | レスポンシブでダッシュボード / Entry詳細 / Inboxを閲覧 |
| FR-91 | スマホから手動でEvidence追加（URL貼付 + メモ） |
| FR-92 | Task完了 / 期限変更 / メモ追記、Eventの確認・更新 |

### 9.11 通知（メール）

| ID | 要件 |
|----|------|
| FR-100 | 締切通知（ON/OFF） |
| FR-101 | 未完了Taskのみ通知対象 |
| FR-102 | 通知タイミング: 締切3日前・24時間前 |
| FR-103 | 1日1回のまとめ送信（スパム抑制） |
| FR-104 | 未整理Inbox件数が多い場合の整理促進メッセージ |

---

## 10. 技術的実現可能性

### 10.1 実現容易（高確度で可能）

- **Entry中心のデータ管理**: CRUD、一覧、検索、履歴はクラウドのDB + APIで完結。技術的制約なし
- **証跡保存**: URL / タイトル / 時刻 / sourceの保存・表示は標準的な実装で可能
- **拡張からの送信**: Chrome拡張（MV3）で現在タブ情報を取得し、APIに送信する仕組みは確立されている
- **レスポンシブWeb**: 閲覧・手動追加・タスク処理のモバイル対応は標準的
- **メール通知**: 期限ベースの定期ジョブで送信。技術的に枯れた領域

### 10.2 条件付きで可能（設計の工夫が必須）

- **企業名/行動種別の自動推定**: ページ内DOM構造はサイトごとに異なり、改修で崩れる。**対策**: 候補提示 + ユーザー確定を必須にする。100%自動を目指さない
- **ATSドメイン問題**: 企業マイページがi-web/SONAR等のATSドメインになり、企業ドメインにならないケースが頻発。**対策**: ドメインだけでなく、タイトル・見出し・固定語を含む複数シグナルで推定
- **SPA対応**: URL変更なし、DOM遅延生成、タイトル未確定が起きる。**対策**: フォールバック保存（URL + タイトル + 時刻）+ Inbox退避で必ず記録を残す
- **会社名の表記揺れ・同名**: 対策は別名辞書（ユーザー単位）+ ドメイン/URLを補助キーに。完璧を目指さず「修正しやすい」設計にする

### 10.3 非推奨（MVPから除外する合理性）

- **就活サイト側フォームの自動入力/自動操作**: DOM変更で壊れやすく、ログイン状態/CSRF/2FA/CAPTCHAに阻まれやすい。規約・セキュリティリスクも高い。本サービスの目的（横断台帳）に必須ではない
- **各就活サービス内部データの完全同期（公式APIなし）**: スクレイピング依存で保守負債とリスクが高い

---

## 11. 非機能要件

| ID | 要件 |
|----|------|
| NFR-01 | **パフォーマンス**: 「自分のデータだけ」を高速に扱える（ユーザー単位クエリ前提）。ダッシュボード（Open Entry + 近いTask/Event）は体感遅延なし。設計ターゲット: 年間95万Entry規模 |
| NFR-02 | **データライフサイクル**: Closed Entryはデフォルト非表示（アーカイブ退避）。Inboxは自動アーカイブ。Evidence/ログはアーカイブ後も参照可能（削除はユーザー操作のみ） |
| NFR-03 | **データ整合性**: Entry / Task / Event / Evidence / Inbox の参照整合性。誤紐付けの修正（付け替え・統合）を常に可能にする |
| NFR-04 | **セキュリティ・信頼性**: 通信はHTTPS。退会 = 全データ削除。エクスポート提供。別名辞書はユーザー単位（汚染防止）。認証トークンの安全な保持 |
| NFR-05 | **保守性**: サイトごとのDOM依存を最小化し、候補提示 + 確定で吸収する。サイト別ロジックはプラガブルに |

---

## 12. データモデル（論理要件）

### エンティティと関係

```
User
 ├── 1:N Company
 │    └── 1:N CompanyAlias（ユーザー単位の表記揺れ辞書）
 ├── 1:N Entry（必ず1つのCompanyに属する）
 │    ├── 1:N Task
 │    ├── 1:N Event
 │    ├── 1:N Evidence
 │    └── 1:N StageHistory
 └── 1:N InboxItem（後からEntryへ割当可能）
```

### 各エンティティの主要項目

| エンティティ | 主要項目 |
|-------------|---------|
| User | id, email, name, created_at |
| Company | id, user_id, canonical_name, memo |
| CompanyAlias | id, user_id, company_id, alias |
| Entry | id, user_id, company_id, route（応募ルート）, source, status（Open/Closed-Win/Closed-Lose/Closed-Drop）, current_stage, custom_status, next_action, deadline, tags, memo |
| Task | id, entry_id, title, due_date, status, priority, notify |
| Event | id, entry_id, title, event_type, datetime, location_or_url, status（未実施/実施済み/結果待ち）, memo |
| Evidence | id, entry_id, url, page_title, source, memo, created_at |
| StageHistory | id, entry_id, stage, changed_at |
| InboxItem | id, user_id, url, page_title, source_guess, memo, created_at, archived |

---

## 13. 画面要件（UI概要）

### ダッシュボード
- Entry一覧（フェーズ / 次アクション / 締切 / source / 最終更新）
- フィルタ（状態、Stage、source、タグ）、検索
- 直近Event（Task とは別枠で表示）
- 期限が近い未完了Taskの強調表示
- 未整理Inbox件数の常時表示（上部）

### Entry詳細
- 企業基本情報、応募ルート、source
- 現在Stage + カスタムステータス
- タスク一覧
- Event一覧
- 証跡一覧（URL履歴）
- 選考フロー（テンプレ + 実績タイムライン）
- メモ

### Chrome拡張ポップアップ
- 企業名候補（選択 / 手入力）
- source表示（自動推定）
- 保存ボタン（Entry指定 or Inbox行き）
- 直近Entryのショートカット

### Inbox
- 未整理アイテム一覧（保存日時順）
- Entry割当UI（推定候補を上段に提示、ワンクリック割当）
- アーカイブ済みの閲覧

---

## 14. MVP定義

### MVP-1（最小で価値が出る形）
- Entry CRUD + 状態管理（Open / Closed）
- Stage更新（手動）+ カスタムステータス
- Task（作業 + 締切）
- Event（予定）
- Evidence（証跡保存）
- Inbox（未整理箱 + 割当）
- Chrome拡張: source推定 + 企業名候補 + 保存（Entry/Inbox）
- ダッシュボード（一覧 / 検索 / フィルタ / 締切表示）
- レスポンシブ（スマホ閲覧 + 手動追加 + タスク処理）
- メール通知（締切3日前/24時間前、日次まとめ）
- 退会 + エクスポート

### MVP-2（早期追加）
- 重複統合（別名辞書の活用）
- 拡張の「直近Entryに即保存」導線
- 実績タイムライン表示（StageHistory + Evidence）
- Inboxの整理促進強化

---

## 15. 制約・リスクと対策

| リスク | 対策 |
|--------|------|
| DOM変更で拡張の抽出が壊れる | 100%自動にしない。候補提示 + 確定UIを基本設計に。Inboxでフォールバック |
| ATSドメイン（i-web/SONAR等）で企業判定が困難 | 複数シグナル推定（ドメイン + タイトル + 見出し + 固定語） |
| 会社名の表記揺れ・同名 | ユーザー単位の別名辞書。ドメイン/URLを補助キーに |
| Inboxのゴミ屋敷化 | 未整理件数の常時表示 + 高速割当UI + 30日自動アーカイブ |
| CompanyAlias のマスター汚染 | ユーザー単位に閉じる（共有辞書はMVP外） |
| 機微情報の漏洩リスク | HTTPS、退会時全削除、エクスポート提供、認証トークン安全保持 |

---

## 16. 成功指標

- 初回10分で: Entry数件 + Task + Evidence が登録され、運用が回り始める
- 保存成功率: 拡張利用時に「保存が失敗しない」（Inbox退避含む）
- Inbox滞留: 未整理警告 + 簡易割当で自然に減る
- 締切漏れ: 通知メールにより自己申告の漏れが減少
- 週次継続利用: タスク処理・締切確認でダッシュボードを開く理由がある

---

## 17. 将来拡張ロードマップ

| 優先度 | 機能 | 備考 |
|--------|------|------|
| 高 | Google Calendar API 連携 | 面接予定の自動取り込み → Entry紐付け |
| 高 | Gmail 連携 | 合否/日程メールからフェーズ自動更新 |
| 中 | ES自動生成 | Entry情報 + 過去提出 + 会話ログを材料に生成AI活用 |
| 中 | 会話情報・下書きの長期保存 | 検索可能なナレッジとしてEntry/Companyに紐付け |
| 低 | 共有別名辞書 | レビュー/スコアリング/汚染対策が必要 |
| 低 | フロー推定の高度化 | 統計・学習ベース |
